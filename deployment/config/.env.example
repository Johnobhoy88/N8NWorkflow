# n8n Workflow Builder v3.0 - Environment Configuration
# Copy this file to .env and fill in your values

# ==========================================
# CORE CONFIGURATION
# ==========================================

# n8n Instance
N8N_HOST=localhost
N8N_PORT=5678
N8N_PROTOCOL=https
N8N_PATH=/
WEBHOOK_URL=https://your-domain.com/webhook

# Execution Settings
EXECUTIONS_TIMEOUT=300
EXECUTIONS_MAX_TIMEOUT=3600
EXECUTIONS_DATA_SAVE_ON_ERROR=all
EXECUTIONS_DATA_SAVE_ON_SUCCESS=all
EXECUTIONS_DATA_SAVE_MANUAL_EXECUTIONS=true

# ==========================================
# AI SERVICES
# ==========================================

# Primary AI Provider
AI_PROVIDER=gemini
AI_ENDPOINT=https://generativelanguage.googleapis.com/v1beta
AI_API_KEY=your-api-key-here
AI_MODEL=gemini-2.0-flash-exp
AI_TIMEOUT=30000

# QA Service
QA_ENDPOINT=https://qa-service.your-domain.com
QA_API_KEY=your-qa-api-key

# Backup AI Provider
BACKUP_AI_PROVIDER=openai
BACKUP_AI_ENDPOINT=https://api.openai.com/v1
BACKUP_AI_API_KEY=your-openai-key
BACKUP_AI_MODEL=gpt-4

# ==========================================
# DATABASE CONFIGURATION
# ==========================================

# PostgreSQL
DB_TYPE=postgresdb
DB_POSTGRESDB_HOST=localhost
DB_POSTGRESDB_PORT=5432
DB_POSTGRESDB_DATABASE=n8n_workflows
DB_POSTGRESDB_USER=n8n_user
DB_POSTGRESDB_PASSWORD=secure-password-here
DB_POSTGRESDB_SCHEMA=public

# Database Tables
AUDIT_TABLE=workflow_audit_log
ERROR_TABLE=workflow_errors
METRICS_TABLE=workflow_metrics

# Connection Pool
DB_POSTGRESDB_POOL_MIN=2
DB_POSTGRESDB_POOL_MAX=10

# ==========================================
# STORAGE CONFIGURATION
# ==========================================

# AWS S3
S3_BUCKET=n8n-workflows-prod
S3_REGION=us-east-1
S3_ACCESS_KEY_ID=your-access-key
S3_SECRET_ACCESS_KEY=your-secret-key
S3_ENDPOINT=https://s3.amazonaws.com

# Local Storage Backup
LOCAL_STORAGE_PATH=/var/n8n/storage
BINARY_DATA_MODE=filesystem

# ==========================================
# AUTHENTICATION & SECURITY
# ==========================================

# Basic Auth
N8N_BASIC_AUTH_ACTIVE=true
N8N_BASIC_AUTH_USER=admin
N8N_BASIC_AUTH_PASSWORD=secure-password-here

# JWT Configuration
N8N_JWT_AUTH_ACTIVE=true
N8N_JWT_AUTH_HEADER=Authorization
N8N_JWT_AUTH_HEADER_VALUE_PREFIX=Bearer
N8N_JWT_SECRET=your-jwt-secret-here
N8N_JWT_EXPIRES_IN=7d

# Encryption
N8N_ENCRYPTION_KEY=your-32-char-encryption-key-here

# ==========================================
# OAUTH2 CREDENTIALS
# ==========================================

# Gmail OAuth2
GMAIL_OAUTH2_ID=gmail-oauth2-credential-id
GMAIL_CLIENT_ID=your-client-id.apps.googleusercontent.com
GMAIL_CLIENT_SECRET=your-client-secret
GMAIL_REDIRECT_URI=https://your-domain.com/oauth2/callback

# Slack OAuth2
SLACK_API_ID=slack-credential-id
SLACK_CLIENT_ID=your-slack-client-id
SLACK_CLIENT_SECRET=your-slack-client-secret
SLACK_SIGNING_SECRET=your-signing-secret

# ==========================================
# NOTIFICATION CHANNELS
# ==========================================

# Slack Notifications
SLACK_CHANNEL=#workflow-notifications
SLACK_ERROR_CHANNEL=#workflow-errors
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# Email Notifications
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=notifications@your-domain.com
SMTP_PASS=your-smtp-password
SMTP_SENDER=N8N Workflow Builder <noreply@your-domain.com>

# ==========================================
# MONITORING & OBSERVABILITY
# ==========================================

# Metrics
METRICS_ENABLED=true
METRICS_INCLUDE_DEFAULT=true
METRICS_INCLUDE_API_ENDPOINTS=true
METRICS_INCLUDE_API_PATH_LABEL=true
METRICS_INCLUDE_API_METHOD_LABEL=true
METRICS_INCLUDE_API_STATUS_CODE_LABEL=true

# Prometheus
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
PROMETHEUS_PATH=/metrics

# Logging
LOG_LEVEL=info
LOG_OUTPUT=console,file
LOG_FILE_PATH=/var/log/n8n/workflow-builder.log
LOG_FILE_MAX_SIZE=100M
LOG_FILE_MAX_BACKUPS=10

# Sentry Error Tracking
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1

# ==========================================
# RATE LIMITING & QUOTAS
# ==========================================

# API Rate Limits
RATE_LIMIT_ENABLED=true
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_WINDOW_MS=60000

# Workflow Quotas
MAX_WORKFLOW_SIZE_MB=10
MAX_NODES_PER_WORKFLOW=100
MAX_EXECUTION_TIME_MINUTES=60

# ==========================================
# GDPR & COMPLIANCE
# ==========================================

# Data Retention
DATA_RETENTION_DAYS=365
AUDIT_LOG_RETENTION_DAYS=2555
PII_ENCRYPTION_ENABLED=true

# Consent Management
CONSENT_TRACKING_ENABLED=true
CONSENT_DATABASE_TABLE=gdpr_consent

# Data Anonymization
ANONYMIZE_AFTER_DAYS=30
ANONYMIZATION_ENABLED=true

# ==========================================
# DEPLOYMENT CONFIGURATION
# ==========================================

# Environment
NODE_ENV=production
DEPLOYMENT_NAME=workflow-builder-v3
INSTANCE_ID=prod-01

# Health Checks
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_PORT=8080
HEALTH_CHECK_PATH=/health

# Feature Flags
FEATURE_FLAG_ENTERPRISE_QA=true
FEATURE_FLAG_AI_FALLBACK=true
FEATURE_FLAG_AUDIT_LOGGING=true
FEATURE_FLAG_SLACK_NOTIFICATIONS=true

# ==========================================
# PERFORMANCE TUNING
# ==========================================

# Worker Configuration
WORKER_CONCURRENCY=10
QUEUE_BULL_REDIS_HOST=localhost
QUEUE_BULL_REDIS_PORT=6379
QUEUE_BULL_REDIS_DB=0

# Cache Configuration
CACHE_ENABLED=true
CACHE_REDIS_HOST=localhost
CACHE_REDIS_PORT=6379
CACHE_REDIS_TTL=3600

# ==========================================
# THIRD-PARTY INTEGRATIONS
# ==========================================

# Datadog
DATADOG_API_KEY=your-datadog-api-key
DATADOG_APP_KEY=your-datadog-app-key
DATADOG_SITE=datadoghq.com

# PagerDuty
PAGERDUTY_INTEGRATION_KEY=your-integration-key
PAGERDUTY_SEVERITY_THRESHOLD=high

# ==========================================
# BACKUP & RECOVERY
# ==========================================

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=n8n-backups
BACKUP_ENCRYPTION_ENABLED=true

# ==========================================
# DEVELOPMENT & TESTING
# ==========================================

# Test Mode
TEST_MODE=false
TEST_WEBHOOK_URL=http://localhost:5678/webhook-test
MOCK_AI_RESPONSES=false
DRY_RUN_MODE=false

# Debug Settings
DEBUG_MODE=false
VERBOSE_LOGGING=false
SQL_LOGGING=false